<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viweport" content="width=device-width, initial-scale=1">
    <title>Project A - My Profile</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/styles.css" th:href="@{/css/styles.css}">
    <link href="https://fonts.googleapis.com/css?family=Pontano+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="shortcut icon" th:href="@{/img/favicon.ico}" href="./img/favicon.ico">
</head>

<body>
    <div class="container v-container text-center">
        <div class="mb-4">
            <form class="form-group" style="margin: 0 auto;" id="msg-form" th:action="@{/logout}" method="POST" onsubmit="return false;">

                <img src="./img/hlogo3.png">
                <br />
                <br />
                <br />
                <div class="row text-left">
                    <div class="col">
                        <div class="form-group">
                            <label for="old-message" class="message-label">Message to encrypt</label>
                            <textarea class="form-control txtbox" rows="3" id="old-message"></textarea>
                            <br />
                            <input class="btn btn-success float-right" id="submit-button" type="button" value="Encrypt!">
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                            <label for="new-message" class="message-label">Encrypted message</label>
                            <textarea class="form-control txtbox" rows="3" id="new-message" readonly></textarea>
                            <br />
                            <input id="encrypt-button" class="btn btn-success" type="submit" value="Save!">
                        </div>
                    </div>
                </div>
                <h2>Options</h2>
                <div class="form-inline justify-content-center">
                    <div class="form-check">
                        <label class="form-check-label checkbox-option" for="visiblity" style="padding-right: 1em;">Make message private</label>
                        <input type="checkbox" class="form-check-input" id="visibility">

                    </div>
                    <div class="form-group">
                        <label for="sel1" style="padding-right: 1em;margin-left: 0.7em;">Select encode:</label>
                        <select class="form-control" id="encode" required>
                            <option selected></option>
                            <option>CIPHER</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>

                    <div class="quantity buttons_added shift-group form-group"><label style="margin-left: -1em;margin-right: 1em;">
                        Shift:</label>
                        <input type="button" value="-" class="minus"><input type="number" step="1" min="1" max="" name="quantity" value="1" title="Qty" class="input-text qty text shift-value" size="4" pattern="" inputmode=""><input type="button" value="+" class="plus">

                    </div>
                </div>

            </form>
            <div class="row second-row-element" th:object="${currentUser}">
                <div class="col col-lg">

                </div>
                <div class="col col-lg">
                    <h2>Messages</h2>
                </div>
                <div class="col col-lg">

                </div>
            </div>
            <div class="row">
                <div class="col col-lg">

                </div>
                <div class="col col-lg">

                </div>
                <div class="col col-lg">

                </div>
            </div>
            <div class="row">
                <div class="col col-lg">

                </div>
                <div class="col col-lg">

                </div>
                <div class="col col-lg">

                </div>
            </div>
            <br />
            <br />
            <br />
            <br />
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script>
        $(".shift-group").hide('slow');

        /***************************/
        /*     0 = NONE            */ 
        /*     1 = CIPHER          */
        /***************************/     
        $("#encode").on('change', function() {
            var encodeIndex = $("option:selected").index("option");
            var x = $("option:selected").val();
                 $(".shift-group").hide('slow');
            if (encodeIndex == 1) {
                $(".shift-group").show('slow');
            }
        });

        $("#submit-button").click(function() {
            $("#new-message").empty();
            var x = $("#old-message").val();
            var selectedOption = $("#encode").val();
            var shiftvalue =  $(".shift-value").val();
            toCipher(x, shiftvalue);
            //console.log($("#visibility").is(":checked")); PRIVATE BOX VALUE 
        });

        function toCipher(x, y) { //y = string, x = shift
            var i;
            var res = "";
            for (i = 0; i < x.length; i++) {
                res += String.fromCharCode(x.charCodeAt(i) + Number(y));
            }

            $("#new-message").append(res);
        }

    </script>
    <script>
        function wcqib_refresh_quantity_increments() {
            jQuery("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").each(function(a, b) {
                var c = jQuery(b);
                c.addClass("buttons_added"), c.children().first().before('<input type="button" value="-" class="minus" />'), c.children().last().after('<input type="button" value="+" class="plus" />')
            })
        }
        String.prototype.getDecimals || (String.prototype.getDecimals = function() {
            var a = this,
                b = ("" + a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
            return b ? Math.max(0, (b[1] ? b[1].length : 0) - (b[2] ? +b[2] : 0)) : 0
        }), jQuery(document).ready(function() {
            wcqib_refresh_quantity_increments()
        }), jQuery(document).on("updated_wc_div", function() {
            wcqib_refresh_quantity_increments()
        }), jQuery(document).on("click", ".plus, .minus", function() {
            var a = jQuery(this).closest(".quantity").find(".qty"),
                b = parseFloat(a.val()),
                c = parseFloat(a.attr("max")),
                d = parseFloat(a.attr("min")),
                e = a.attr("step");
            b && "" !== b && "NaN" !== b || (b = 0), "" !== c && "NaN" !== c || (c = ""), "" !== d && "NaN" !== d || (d = 0), "any" !== e && "" !== e && void 0 !== e && "NaN" !== parseFloat(e) || (e = 1), jQuery(this).is(".plus") ? c && b >= c ? a.val(c) : a.val((b + parseFloat(e)).toFixed(e.getDecimals())) : d && b <= d ? a.val(d) : b > 0 && a.val((b - parseFloat(e)).toFixed(e.getDecimals())), a.trigger("change")
        });

    </script>

</body>

</html>
